<!-- ---------------------------------------------------- -->
<!-- ---------------------------------------------------- -->
<!DOCTYPE html>
<html>

<!-- ---------------------------------------------------- -->
<!-- ---------------------------------------------------- -->
<head>
<meta charset="utf-8"/>   

<!-- ---------------------------------------------------- -->
<script src="logicaFake/buscarMedidas.js"></script>
<script src="logicaFake/buscarMedidaConID.js"></script>
<script src="logicaFake/insertarMedida.js"></script>
<!-- ---------------------------------------------------- -->



<script>
  function mostrarMedidas() {
  console.log("Inicio Aplicación/mostrarMedidas()");

  // llamo a la función de la lógica (versión fake)
  mostrarInfo(function( err, res ) {
    
    // cuando tenga el resultado lo muestro
   if ( err ) {
     alert( " hubo un error de transmisión http: " + err )
     return
   } else if ( res.error ) {
     alert( " hubo un error en la llamada: " + JSON.stringify( res.error ) )
     return
   }
    document.getElementById("infoMedidas").innerHTML  =  "   resultado=  "  + JSON.stringify( res );
  })
  
  }
  </script>


<!-- ----------------------------------------------------------------------- -->
<!-- ----------------------------------------------------------------------- -->
<script>

  function buscarMedidaPulsado() {
  
  var id = document.getElementById("id").value
  
  // llamo a la función de la lógica (versión fake)
  buscarMedidaConID( id , function( err, res ) {
    // cuando tenga el resultado lo muestro
   if ( err ) {
     alert( " hubo un error de transmisión http: " + err )
     return
   } else if ( res.error ) {
     alert( " hubo un error en la llamada: " + JSON.stringify( res.error ) )
     return
   }
    document.getElementById("salida").innerHTML  =  "   resultado=  "  + JSON.stringify( res );
  })
  
  }
  </script>


<script>

  function insertarMedidaPulsado() {

  var today = new Date();
  var dd = String(today.getDate()).padStart(2, '0');
  var mm = String(today.getMonth() + 1).padStart(2, '0');
  var yyyy = today.getFullYear();
  var hour = today.getHours();
  var minutes = today.getMinutes();
  var seconds = today.getSeconds();

  today = mm + '/' + dd + '/' + yyyy + ", " + hour + ":" + minutes + ":" + seconds;

  
  let nombreSensor = "sensorOzono";
  let latitud = Math.random().toFixed(3);
  let longitud = Math.random().toFixed(3);
  let medida = Math.random().toFixed(3);
  var id = null;
  
  // llamo a la función de la lógica (versión fake)
  insertarMedida( {id:  id, medida:  medida, fecha:  today, nombreSensor: nombreSensor, longitud: longitud, latitud: latitud }, function( err, res ) {
    // cuando tenga el resultado lo muestro
   if ( err ) {
     alert( " hubo un error de transmisión http: " + err )
     return
   } else if ( res.error ) {
     alert( " hubo un error en la llamada: " + JSON.stringify( res.error ) )
     return
   }
    document.getElementById("salida").innerHTML = " resultado= " + res;

  })
  
  }
  </script>


</head>

<!-- ---------------------------------------------------- -->
<!-- ---------------------------------------------------- -->
<body>

<h1>Medidas Sensor</h1>

<form>

  Id:<br>
  <input id="id" type="number" name="Id" placeholder="ID">
  <br>


</form> 


<button type="buton" onclick="buscarMedidaPulsado()">Buscar Medida</button>

<p>
  <button type="buton" onclick="mostrarMedidas()"> Mostrar todas las medidas </button>
</p>

<p>
  <button type="buton" onclick="insertarMedidaPulsado()"> Insertar Medida </button>
</p>

<p id="salida">Estado</p>
<p id="infoMedidas">Antes</p>


</body>
</html>
<!-- ---------------------------------------------------- -->
<!-- ---------------------------------------------------- -->
<!-- ---------------------------------------------------- -->
